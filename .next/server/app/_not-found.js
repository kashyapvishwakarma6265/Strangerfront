(()=>{var e={};e.id=165,e.ids=[165],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},852:e=>{"use strict";e.exports=require("async_hooks")},4300:e=>{"use strict";e.exports=require("buffer")},6206:e=>{"use strict";e.exports=require("console")},6113:e=>{"use strict";e.exports=require("crypto")},7643:e=>{"use strict";e.exports=require("diagnostics_channel")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},1808:e=>{"use strict";e.exports=require("net")},5673:e=>{"use strict";e.exports=require("node:events")},4492:e=>{"use strict";e.exports=require("node:stream")},7261:e=>{"use strict";e.exports=require("node:util")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},7282:e=>{"use strict";e.exports=require("process")},3477:e=>{"use strict";e.exports=require("querystring")},2781:e=>{"use strict";e.exports=require("stream")},5356:e=>{"use strict";e.exports=require("stream/web")},1576:e=>{"use strict";e.exports=require("string_decoder")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9830:e=>{"use strict";e.exports=require("util/types")},1267:e=>{"use strict";e.exports=require("worker_threads")},9796:e=>{"use strict";e.exports=require("zlib")},3930:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>g,tree:()=>u});var s=t(482),o=t(9108),i=t(2563),n=t.n(i),a=t(8300),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);t.d(r,l);let u=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,192)),"C:\\Users\\MAIDC AIO PC 1\\Desktop\\important\\Stranger\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],c=[],d="/_not-found",p={require:t,loadChunk:()=>Promise.resolve()},g=new s.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/_not-found",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},2966:(e,r,t)=>{Promise.resolve().then(t.bind(t,2388))},9373:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,4209,23))},3838:(e,r,t)=>{"use strict";let s;t.d(r,{H:()=>m,a:()=>h});var o=t(5344),i=t(3729),n=t(9852),a=t(6041),l=t(8414);console.log("\uD83D\uDD25 Initializing Firebase...");let u={apiKey:"AIzaSyBoP9F82lZNJ_bIkkAWAhJwuOgYlS4JaFg",authDomain:"stranger-chat-74b46.firebaseapp.com",projectId:"stranger-chat-74b46",storageBucket:"stranger-chat-74b46.appspot.com",messagingSenderId:"75423958257",appId:"1:75423958257:web:c1cd71cd1a3c9f7f69d550"};console.log("\uD83D\uDCDD Firebase Config:",{projectId:u.projectId||"❌ MISSING",authDomain:u.authDomain||"❌ MISSING",apiKey:u.apiKey?"✅ SET":"❌ MISSING"});try{s=(0,a.ZF)(u),console.log("✅ Firebase app initialized")}catch(e){console.error("❌ Firebase initialization error:",e)}let c=(0,n.v0)(s),d=(0,l.ad)(s);(0,n.Fb)(c,n.a$).then(()=>console.log("✅ Persistence enabled")).catch(e=>console.error("❌ Persistence error:",e));let p=async(e,r)=>{if(!e)return console.warn("⚠️ No userId provided to createUserProfile"),!1;try{let t=(0,l.JU)(d,"users",e);return await (0,l.pl)(t,{...r,updatedAt:(0,l.Bt)()},{merge:!0}),console.log(`✅ Profile saved for user: ${e}`),!0}catch(e){return console.error("❌ Error creating user profile:",e),!1}},g=(0,i.createContext)(),h=()=>{let e=(0,i.useContext)(g);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},m=({children:e})=>{let[r,t]=(0,i.useState)(null),[s,a]=(0,i.useState)(!0),[l,u]=(0,i.useState)(null);(0,i.useEffect)(()=>{console.log("\uD83D\uDD0D Setting up auth state listener...");let e=!0,r=(0,n.Aj)(c,async r=>{console.log("\uD83D\uDC64 onAuthStateChanged fired:",r?.email||"null");try{r?(console.log("✅ User found:",r.email),p(r.uid,{uid:r.uid,email:r.email,displayName:r.displayName||r.email.split("@")[0],photoURL:r.photoURL,lastActive:new Date,status:"online"}).catch(e=>console.error("Profile update error:",e)),e&&(console.log("✅ Setting user state:",r.email),t(r),u(null),a(!1))):(console.log("❌ No user found"),e&&(t(null),a(!1)))}catch(r){console.error("❌ Auth state error:",r),e&&(u(r.message),a(!1))}},r=>{console.error("❌ Auth listener error:",r),e&&(u(r.message),a(!1))});return()=>{console.log("\uD83E\uDDF9 Cleaning up auth listener"),e=!1,r()}},[]);let d=async(e,r,t="")=>{try{a(!0),u(null),console.log("\uD83D\uDCDD Starting signup for:",e);let s=await (0,n.Xb)(c,e,r);return console.log("✅ User created in Firebase:",s.user.email),t&&(await (0,n.ck)(s.user,{displayName:t}),console.log("✅ Display name updated")),await p(s.user.uid,{uid:s.user.uid,email:s.user.email,displayName:t||e.split("@")[0],createdAt:new Date,lastActive:new Date,status:"online"}),console.log("✅ User profile created"),s}catch(e){throw console.error("❌ Signup error:",e),u("auth/email-already-in-use"===e.code?"This email is already registered":"auth/weak-password"===e.code?"Password should be at least 6 characters":e.message),a(!1),e}},h=async(e,r)=>{try{u(null),console.log("\uD83D\uDD10 Starting login for:",e);let t=await (0,n.e5)(c,e,r);return console.log("✅ User logged in:",t.user.email),p(t.user.uid,{lastActive:new Date,status:"online"}).catch(e=>console.error("Profile update error:",e)),t}catch(e){throw console.error("❌ Login error:",e),u("auth/invalid-credential"===e.code?"Invalid email or password":"auth/user-not-found"===e.code?"User not found":e.message),a(!1),e}},m=async()=>{try{u(null),a(!0);let e=new n.hJ;e.addScope("profile"),e.addScope("email"),e.setCustomParameters({prompt:"consent"}),console.log("\uD83D\uDD37 Starting Google login with popup...");let r=await (0,n.rh)(c,e);console.log("✅ Google login successful:",r.user.email),await p(r.user.uid,{uid:r.user.uid,email:r.user.email,displayName:r.user.displayName,photoURL:r.user.photoURL,provider:"google",lastActive:new Date,status:"online"}),console.log("✅ Google user profile created")}catch(e){console.error("❌ Google login error:",e.code,e.message),"auth/popup-blocked-by-browser"===e.code?u("❌ Google popup was blocked. Allow popups in browser settings."):"auth/popup-closed-by-user"===e.code?u("You closed the Google popup. Try again."):"auth/cancelled-popup-request"===e.code?u("Sign in was cancelled. Try again."):"auth/operation-not-supported-in-this-environment"===e.code?u("❌ Google sign in not available. Check Firebase config."):u(e.message||"Failed to sign in with Google"),a(!1)}},x=async e=>{try{return u(null),await (0,n.LS)(c,e),console.log("✅ Password reset email sent"),!0}catch(e){throw console.error("❌ Reset password error:",e),u("auth/user-not-found"===e.code?"No account found with this email":e.message),e}},f=async()=>{try{a(!0),u(null),console.log("\uD83D\uDEAA Logging out..."),r&&await p(r.uid,{status:"offline"}),await (0,n.w7)(c),a(!1),console.log("✅ Logout successful")}catch(e){console.error("❌ Logout error:",e),u(e.message),a(!1)}};return o.jsx(g.Provider,{value:{user:r,signup:d,login:h,googleLogin:m,resetPassword:x,logout:f,loading:s,error:l,setError:u},children:e})}},2388:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Providers:()=>i});var s=t(5344),o=t(3838);function i({children:e}){return s.jsx(o.H,{children:e})}},192:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d,metadata:()=>u,viewport:()=>c});var s=t(5036),o=t(6843);let i=(0,o.createProxy)(String.raw`C:\Users\MAIDC AIO PC 1\Desktop\important\Stranger\app\providers.js`),{__esModule:n,$$typeof:a}=i;i.default;let l=(0,o.createProxy)(String.raw`C:\Users\MAIDC AIO PC 1\Desktop\important\Stranger\app\providers.js#Providers`);t(7272);let u={title:"Blink Anonymous chat",description:"Anonymous encrypted chat. No data stored. "},c={width:"device-width",initialScale:1};function d({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:"bg-gradient-to-br from-blue-600 to-purple-600 min-h-screen",children:s.jsx(l,{children:e})})})}},7272:()=>{}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[501],()=>t(3930));module.exports=s})();